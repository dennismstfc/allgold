{"ast":null,"code":"var getPosition = require('geo-position');\n\nvar base = 'http://www.openstreetmap.org/export/embed.html';\n\nvar Emitter = require('events').EventEmitter;\n\nvar inherits = require('util').inherits;\n\nmodule.exports = Map;\n\nfunction Map() {\n  if (!(this instanceof Map)) return new Map();\n  Emitter.call(this);\n  this.iframe = document.createElement('iframe');\n  this._position = null;\n  this._radius = 0.004;\n}\n\ninherits(Map, Emitter);\n\nMap.prototype.radius = function (radius) {\n  this._radius = radius;\n  return this;\n};\n\nMap.prototype.position = function (latitude, longitude) {\n  this._position = {\n    latitude: latitude,\n    longitude: longitude\n  };\n  this.emit('position', this._position);\n  return this;\n};\n\nMap.prototype.show = function () {\n  var self = this;\n  var iframe = self.iframe;\n  var r = self._radius;\n  if (self._position) onPosition(null, self._position);else getPosition(function (err, obj) {\n    onPosition(err, obj);\n  });\n\n  function onPosition(err, position) {\n    if (err) return self.emit('error', err);\n    self.emit('position', position);\n    var lon = position.longitude;\n    var lat = position.latitude;\n    iframe.src = base + '?layer=mapnik' + '&bbox=' + [lon - r / 2, lat - r / 4, lon + r / 2, lat + r / 4].join(',') + '&marker=' + [lat, lon].join(',');\n  }\n\n  return iframe;\n};","map":{"version":3,"sources":["C:/Users/denni/Documents/GitHub/allgold-website/node_modules/osm/index.js"],"names":["getPosition","require","base","Emitter","EventEmitter","inherits","module","exports","Map","call","iframe","document","createElement","_position","_radius","prototype","radius","position","latitude","longitude","emit","show","self","r","onPosition","err","obj","lon","lat","src","join"],"mappings":"AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,cAAD,CAAzB;;AACA,IAAIC,IAAI,GAAG,gDAAX;;AACA,IAAIC,OAAO,GAAGF,OAAO,CAAC,QAAD,CAAP,CAAkBG,YAAhC;;AACA,IAAIC,QAAQ,GAAGJ,OAAO,CAAC,MAAD,CAAP,CAAgBI,QAA/B;;AAEAC,MAAM,CAACC,OAAP,GAAiBC,GAAjB;;AAEA,SAASA,GAAT,GAAgB;AACd,MAAI,EAAE,gBAAgBA,GAAlB,CAAJ,EAA4B,OAAO,IAAIA,GAAJ,EAAP;AAC5BL,EAAAA,OAAO,CAACM,IAAR,CAAa,IAAb;AACA,OAAKC,MAAL,GAAcC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAd;AAEA,OAAKC,SAAL,GAAiB,IAAjB;AACA,OAAKC,OAAL,GAAe,KAAf;AACD;;AAEDT,QAAQ,CAACG,GAAD,EAAML,OAAN,CAAR;;AAEAK,GAAG,CAACO,SAAJ,CAAcC,MAAd,GAAuB,UAAUA,MAAV,EAAkB;AACvC,OAAKF,OAAL,GAAeE,MAAf;AACA,SAAO,IAAP;AACD,CAHD;;AAKAR,GAAG,CAACO,SAAJ,CAAcE,QAAd,GAAyB,UAAUC,QAAV,EAAoBC,SAApB,EAA+B;AACtD,OAAKN,SAAL,GAAiB;AACfK,IAAAA,QAAQ,EAAEA,QADK;AAEfC,IAAAA,SAAS,EAAEA;AAFI,GAAjB;AAIA,OAAKC,IAAL,CAAU,UAAV,EAAsB,KAAKP,SAA3B;AACA,SAAO,IAAP;AACD,CAPD;;AASAL,GAAG,CAACO,SAAJ,CAAcM,IAAd,GAAqB,YAAY;AAC/B,MAAIC,IAAI,GAAG,IAAX;AACA,MAAIZ,MAAM,GAAGY,IAAI,CAACZ,MAAlB;AACA,MAAIa,CAAC,GAAGD,IAAI,CAACR,OAAb;AAEA,MAAIQ,IAAI,CAACT,SAAT,EAAoBW,UAAU,CAAC,IAAD,EAAOF,IAAI,CAACT,SAAZ,CAAV,CAApB,KACKb,WAAW,CAAC,UAAUyB,GAAV,EAAeC,GAAf,EAAoB;AACnCF,IAAAA,UAAU,CAACC,GAAD,EAAMC,GAAN,CAAV;AACD,GAFe,CAAX;;AAIL,WAASF,UAAT,CAAqBC,GAArB,EAA0BR,QAA1B,EAAoC;AAClC,QAAIQ,GAAJ,EAAS,OAAOH,IAAI,CAACF,IAAL,CAAU,OAAV,EAAmBK,GAAnB,CAAP;AAETH,IAAAA,IAAI,CAACF,IAAL,CAAU,UAAV,EAAsBH,QAAtB;AAEA,QAAIU,GAAG,GAAGV,QAAQ,CAACE,SAAnB;AACA,QAAIS,GAAG,GAAGX,QAAQ,CAACC,QAAnB;AACAR,IAAAA,MAAM,CAACmB,GAAP,GAAa3B,IAAI,GACb,eADS,GAET,QAFS,GAEE,CAACyB,GAAG,GAAGJ,CAAC,GAAC,CAAT,EAAYK,GAAG,GAAGL,CAAC,GAAC,CAApB,EAAuBI,GAAG,GAAGJ,CAAC,GAAC,CAA/B,EAAkCK,GAAG,GAAGL,CAAC,GAAC,CAA1C,EAA6CO,IAA7C,CAAkD,GAAlD,CAFF,GAGT,UAHS,GAGI,CAACF,GAAD,EAAMD,GAAN,EAAWG,IAAX,CAAgB,GAAhB,CAHjB;AAID;;AAED,SAAOpB,MAAP;AACD,CAxBD","sourcesContent":["var getPosition = require('geo-position');\nvar base = 'http://www.openstreetmap.org/export/embed.html';\nvar Emitter = require('events').EventEmitter;\nvar inherits = require('util').inherits;\n\nmodule.exports = Map;\n\nfunction Map () {\n  if (!(this instanceof Map)) return new Map();\n  Emitter.call(this);\n  this.iframe = document.createElement('iframe');\n\n  this._position = null;\n  this._radius = 0.004;\n}\n\ninherits(Map, Emitter);\n\nMap.prototype.radius = function (radius) {\n  this._radius = radius;\n  return this;\n};\n\nMap.prototype.position = function (latitude, longitude) {\n  this._position = {\n    latitude: latitude,\n    longitude: longitude\n  };\n  this.emit('position', this._position);\n  return this;\n};\n\nMap.prototype.show = function () {\n  var self = this;\n  var iframe = self.iframe;\n  var r = self._radius;\n\n  if (self._position) onPosition(null, self._position);\n  else getPosition(function (err, obj) {\n    onPosition(err, obj);\n  });\n  \n  function onPosition (err, position) {\n    if (err) return self.emit('error', err);\n\n    self.emit('position', position);\n\n    var lon = position.longitude;\n    var lat = position.latitude;\n    iframe.src = base\n      + '?layer=mapnik'\n      + '&bbox=' + [lon - r/2, lat - r/4, lon + r/2, lat + r/4].join(',')\n      + '&marker=' + [lat, lon].join(',')\n  }\n\n  return iframe;\n};\n"]},"metadata":{},"sourceType":"script"}